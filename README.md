# cloneCoding(X community site)

# 주목표

1. simple boardSite(백엔드와 프론트엔드 포함)
2. 구현할 범위를 좁히고, 여유가 있으면 늘리겠습니다.

# 스택

next, motion-framer, Embla Carousel, react, tailwind, github, @heroicons/react, zustand, pretendard, headless-ui, zod, clsx, figma

# 기타

1. 매일 커밋을 진행하며 모든 작업은 main 브렌치에 저장되고, 작업은 새로운 브렌치를 작성하여 squash하는 방식으로 진행된다.

2. 단, 일요일은 쉬며 진행상황을 올리지 않는다. 일요일이 아닌 날에 개인사정으로 진행을 못한 경우에는 날짜 밑에 간단한 사유를 적어 커밋한다.

3. issue는 issue.md 파일에 저장, 해결과정 또한 issue.md 파일에서 기재한다.

## 완료된 목표

1. 6/12까지 피그마 설계 완료. 가능하면 ERD까지 작성하기.
2. nestjs 6/20일까지 세팅이 가능할 수준까지 공부하기.(시도가능)
3. 6/15까지 api 문서 작성.(서버 코딩과 함께 작성하기)(6/24 완료)
4. 7/23일, 백엔드 첫번째 작성완료.

## 후순위 목표

## 현재 목표

1. nest 서버 구축.
2. prisma 학습.

### 6/05

1. 피그마로 설계시작.

### 6/06

1. 피그마로 설계중

### 6/07

1. 놀았습니다. 죄송합니다.

### 6/09

1. 피그마로 설계중. 메인페이지 완료.
2. 프로필과 공지 페이지, 추후 로그인 및 회원가입 페이지도 추가 필요.

### 6/10

1. 프로필과 알림 뼈대 작성완료.
2. 로그인과 회원가입 페이지 필요.

### 6/11

1. 로그인 페이지 기본틀 작성완료. 로그인 모달과 회원가입 모달 추가 필요.

### 6/12

1. 모달 작성 및 상호작용 완료.
2. 구현에 필요한 클론코딩 초안 작성 완료.

### 6/13

1. erd 작성 시작.

### 6/14

1. 테이블 목록들 모음

### 6/16

1. erd 초안 완성.
2. api 템플릿 올림.

### 6/17

1. nest 공부.

### 6/18

1. 하루 쉬었습니다. 죄송합니다.

### 6/19

1. nest 학습
   (https://docs.nestjs.com/pipes 클래스 검증기 전까지)
2. 문서 개요의 코드 다 따라쳐봤습니다.

### 6/20

1. 모든 코드 작성 완료

### 6/21

1. 하루 쉬었습니다 죄송합니다.

### 6/23

1. nest 서버 구축중.
2. api 문서 구상.

### 6/24

1. orm으로 prisma 선택. 학습 필요.
   https://www.prisma.io/docs/getting-started/setup-prisma/add-to-existing-project/relational-databases-typescript-postgresql

2. api 문서 초안 작성 완료.

### 6/25

1. 프리즈마 1단계

### 6/26

1. 데이터베이스 스키마 초안, prisma 형식으로 작성완료.
2. db 업데이트와 요청 동작 확인완료.
3. 그외 자잘한 수정사항.(테이블명이나 viewCnt의 default값을 0으로.)

### 6/27

1. 하루 쉬었습니다 죄송합니다.

### 6/28

1. 기본적인 패스 분배 및, 파일 생성

### 6/30

1. 하루 쉬었습니다. 죄송합니다.

### 7/1

1. api문서에서 crud 중 post의 u와 d 기능추가.
2. 필요없는 테이블의 속성 삭제.(스키마 변경)
3. figma에서 간단한 요소 하나 추가.
4. zod를 활용한 타입검증 작성중.

### 7/2

1. 카멜 표기법, 스네이크 표기법으로 전부 통일했습니다.
2. 다소 수정했습니다.

### 7/3

1. guard 적용성공.
2. swagger 사용을 위해 class-validator 설치.
3. class-validator와 guard 동작 확인완료.

### 7/4

1. 소화불량과 더위 때문에 하루 쉬었습니다.

### 7/5

1. 오늘까지만 쉬겠습니다.

### 7/7

1. swagger 연결. swagger로 api 문서 관리 시작.

### 7/8

1. README 7/6=> 7/7로 날짜 수정.
2. swagger 적용을 DTO와 관련지어 익혔습니다.

### 7/9

1. swagger 공부.

### 7/10

1. 스프레드 시트 파일 삭제합니다. api 문서는 /api_document 경로에 있습니다.
2. raw query 추가 및 공부중.

### 7/11

1. 새로운 서비스 추가.(filter)

### 7/12

1. 쉬었습니다. 죄송합니다.

### 7/13

1. 쉬었습니다. 죄송합니다.

### 7/15

1. swagger 정리 및 간단한 로직 완성했습니다.
2. 세부조건 작성 필요합니다.(예를 들어, 이름에 한글만 허용 혹은 영어만 허용. 이메일 형식 맞추는 조건 class-validator로 필요)

### 7/16

1. user모듈측의 로직 오류수정 및 정상동작 확인했습니다.
2. image 파일을 받을 수 있도록 로직수정 및 multer interceptor 추가 완료했습니다.
3. post측 api는 내일 테스트 필요합니다.

### 7/17

1. 잘못된 작업 날짜 수정했습니다. (15~16)
2. multer 추가 및 파일의 생성과 삭제 로직 추가했습니다.
3. delete api 추가했습니다.
4. 업로드 검증 파이프 라인에서 이슈가 발생했습니다.(new FileTypeValidator({fileType:/^image\//}))가 예상한대로 동작하지 않습니다. 문제 확인했습니다. 원인은 interceptor측에서 이미 검증 코드가 존재하고, 그 뒤에 검증 pipeline 추가된 탓에 코드가 꼬였습니다. 포스트 작성 및 저장 논리는 완성됐습니다.
5. 현재 포스트 작성, 삭제, 원하는 포스트 불러오기는 완성됐습니다.

### 7/18

1. 조회수가 늘어나는 로직을 작성했습니다.

#### 추가 필요

1. 현재 all, filter, like, 포스트 patch의 동작을 확인이 필요합니다.
2. 세부조건 작성 필요합니다.(예를 들어, 이름에 한글만 허용 혹은 영어만 허용. 이메일 형식 맞추는 조건 class-validator로 필요)

#### 완료된 작업

3. 조회수가 늘어나는 로직이 필요합니다. (완료)

### 7/19

1. 쉬었습니다 죄송합니다.

### 7/21

1. 잘못된 로직 수정 및 쿼리문 수정중.

#### 추가 필요

1. 현재 all, filter, like, 포스트 patch의 동작을 확인이 필요합니다.(like 완료, patch 체크 완료, filter 수정 진행중(다중 조인 문으로 수정 필요))
2. 세부조건 작성 필요합니다.(예를 들어, 이름에 한글만 허용 혹은 영어만 허용. 이메일 형식 맞추는 조건 class-validator로 필요)(일부완료)

#### 완료된 작업

3. 조회수가 늘어나는 로직이 필요합니다. (완료)

### 7/22

1. 잘못된 날짜 수정.
2. posts 관련 모든 요청 작성 및 수정완료. db schema 수정 완료.
3. 오래된 api 문서를 삭제합니다. api 문서 확인을 위해선 dev 서버를 연 후에 api_document 경로에서 확인해주시기 바랍니다.

#### 추가 필요

2. 세부조건 작성 필요합니다.(예를 들어, 이름에 한글만 허용 혹은 영어만 허용. 이메일 형식 맞추는 조건 class-validator로 필요)(일부완료)

#### 완료된 작업

1. 현재 all, filter, like, 포스트 patch의 동작을 확인이 필요합니다.(like 완료, patch 체크 완료, filter 수정 진행중(다중 조인 문으로 수정 필요))
2. 조회수가 늘어나는 로직이 필요합니다. (완료)

### 7/23

1. 세부조건 추가. 일차적으로 백엔드 완성했습니다.

#### 느낀점

처음 nest와 swagger, prisma, class-validator를 써봤고, 기존에 써봤던 라이브러리와 익숙한 점도 익숙치 않은 점도 많이 느꼈습니다. 특히, 최신 댓글과 글의 알림을 구현하는데 시간이 오래걸렸습니다. 백엔드 개발도 로직이 복잡해지고 문서화에 신경쓸수록 코드가 길어지고 구현이 힘들어진다는 사실을 깨달았습니다. 예상치못한 곳에서 서버에 갈 부담 때문에 top_post_id라는 속성을 추가해 비정규화할 필요도 있었고, 헤더의 content-type 문제도 해결해야 했습니다. 유익한 시간이었지만, 동시에 개인적으론 진한 경험이어서 기억에 오래 남고 잊지 않았으면 좋겠습니다...

### 7/24

1. 백엔드 페이징 기능 추가 필요합니다.

filter, all, /:post_id offset과 limit 추가 필요.

/:post_id가 댓글도 받아올 수 있도록.
대댓글은 hasRepost, hasPost로 댓글과 포스트를 가져올걸 결정가능.

### 7/25

1. 백엔드 페이징 추가했습니다.
2. 댓글수 속성 검색시 추가했습니다.
3. 변경한 스키마 적용이 필요합니다.
4. 포스트 쿼리문 수정했습니다. 특히, filter 쪽의 rawquery는 다음날 체크하고 수정이 필요하면 더 수정하겠습니다.

### 7/26

1. 데이터베이스 스키마 변경.(top_post_id 제외), 댓글을 클릭하면 대댓글을 가져오도록 인터페이스 설계로 바꿨습니다.
2. 속성명 writer_id를 viewer_id로 변경했습니다.
3. filter쪽 쿼리문 중 잘못된 문법을 수정했습니다.

### 7/27

1. 하루 쉬었습니다. 월요일부터 프론트 엔드 작업에 들어가겠습니다.

### 7/28

1. 프론트 엔드 시작합니다.

### 7/29

1. 파일 분류했습니다.

### 7/30

1. 하루 쉬었습니다. 죄송합니다.

### 8/1

1. 왼쪽 메뉴 추가.

### 8/2

1. 왼쪽 메뉴 작성중.

### 8/3

1. 쉬었습니다. 죄송합니다.

### 8/5

1. 쉬었습니다 죄송합니다.

### 8/6

1. 휴가다녀왔습니다.

### 8/7

1. 쉬었습니다 죄송합니다.

### 8/8

1. 쉬었습니다 죄송합니다.

### 8/9

1. 쉬었습니다 죄송합니다.

### 8/10

1. 이번주까지만 쉬겠습니다. 죄송합니다.

### 8/11

1. 이사 도왔습니다.

### 8/12

1. left section 작성중.
